{"data":{"markdownRemark":{"html":"<p><a href=\"https://github.com/rails/webpacker\">Webpacker</a> is an awesome tool and giant step towards front-end friendly development environment in Rails. But Webpacker requires installing Yarn. But what if want to use npm?</p>\n<p>This article will guide you how to replace Yarn with npm for Webpacker gem.</p>\n<h2>Preparation</h2>\n<p>If you starting a brand new Rails app include <code class=\"language-text\">--skip-yarn</code> option.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ rails new try_webpacker_with_npm_app --webpack --skip-yarn</code></pre></div>\n<p>Even with <code class=\"language-text\">--skip-yarn</code> flag enabled <code class=\"language-text\">rails new</code> command will try to install npm packages via Yarn. If you have Yarn installed then you need to execute the steps below to remove webpacker installation via Yarm. Otherwise, you will be warned with <code class=\"language-text\">Yarn not installedâ€¦</code> and no more actions are required.</p>\n<p>If you already started to use webpacker with Yarn you have to find and delete <code class=\"language-text\">yarn.lock</code> file and previously installed node modules.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">rm</span> yarn.lock\n$ <span class=\"token function\">rm</span> -rf node_modules</code></pre></div>\n<p>You can remove <code class=\"language-text\">bin/yarn</code> file as well.</p>\n<p><strong>Please note that you have to use webpacker 3.4.1 or greater and Ruby on Rails 5.1 and greater.</strong></p>\n<h2>Replacement</h2>\n<p>First, you need to disable Webpacker and Yarn integrity check. Add the line below to development and production environment configuration files.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">config<span class=\"token punctuation\">.</span>webpacker<span class=\"token punctuation\">.</span>check_yarn_integrity <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span></code></pre></div>\n<p>The second step is to remove all rake tasks related to Yarn and define new npm tasks in Rakefile after <code class=\"language-text\">Rails.application.load_tasks</code> line.</p>\n<p>The last part. New npm tasks will be in <code class=\"language-text\">lib/tasks/webpacker.rake</code> file. <code class=\"language-text\">webpacker:check_npm</code> and <code class=\"language-text\">webpacker:npm_install</code> will be doing the same job as removed <code class=\"language-text\">webpacker:yarn_install</code> and <code class=\"language-text\">webpacker:check_yarn tasks</code>.</p>","frontmatter":{"title":"An alternative to Rails `before_action`","description":"This article will guide you how to replace Yarn with npm for Webpacker gem.","related":null}}},"pageContext":{"slug":"/blog/tech/2018-03-27-how-to-use-webpacker-with-npm-instead-of-yarn-rails-guide/","previous":null,"next":{"fields":{"slug":"/blog/tech/2017-01-30-an-alternative-to-rails-before-action/"},"frontmatter":{"title":"An alternative to Rails `before_action`","description":"Rails `before_action` is a good tool but often used incorrectly. In this article, I will show what is wrong and my remedy for `before_action` abuse.","date":"2017-01-30T00:00:00.000Z"}}}}